"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[56],{879:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>S,contentTitle:()=>E,default:()=>G,frontMatter:()=>A,metadata:()=>k,toc:()=>C});var a=t(1527),i=t(7541),s=t(959),r=t(6259),o=t(4757),l=t(8903),c=t(1081),h=t(5329),u=t(11),d=t(445);function p(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function g(e){const{values:n,children:t}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return p(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:i}}=e;return{value:n,label:t,attributes:a,default:i}}))}(t);return function(e){const n=(0,u.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function f(e){let{queryString:n=!1,groupId:t}=e;const a=(0,l.k6)(),i=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,h._X)(i),(0,s.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(a.location.search);n.set(i,e),a.replace({...a.location,search:n.toString()})}),[i,a])]}function x(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,i=g(e),[r,o]=(0,s.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:i}))),[l,h]=f({queryString:t,groupId:a}),[u,p]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,i]=(0,d.Nk)(t);return[a,(0,s.useCallback)((e=>{t&&i.set(e)}),[t,i])]}({groupId:a}),x=(()=>{const e=l??u;return m({value:e,tabValues:i})?e:null})();(0,c.Z)((()=>{x&&o(x)}),[x]);return{selectedValue:r,selectValue:(0,s.useCallback)((e=>{if(!m({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);o(e),h(e),p(e)}),[h,p,i]),tabValues:i}}var b=t(3554);const j={tabList:"tabList_TDn8",tabItem:"tabItem_OGtm"};function v(e){let{className:n,block:t,selectedValue:i,selectValue:s,tabValues:l}=e;const c=[],{blockElementScrollPositionUntilNextRender:h}=(0,o.o5)(),u=e=>{const n=e.currentTarget,t=c.indexOf(n),a=l[t].value;a!==i&&(h(n),s(a))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,a.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":t},n),children:l.map((e=>{let{value:n,label:t,attributes:s}=e;return(0,a.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>c.push(e),onKeyDown:d,onClick:u,...s,className:(0,r.Z)("tabs__item",j.tabItem,s?.className,{"tabs__item--active":i===n}),children:t??n},n)}))})}function y(e){let{lazy:n,children:t,selectedValue:i}=e;const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===i));return e?(0,s.cloneElement)(e,{className:"margin-top--md"}):null}return(0,a.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function w(e){const n=x(e);return(0,a.jsxs)("div",{className:(0,r.Z)("tabs-container",j.tabList),children:[(0,a.jsx)(v,{...e,...n}),(0,a.jsx)(y,{...e,...n})]})}function I(e){const n=(0,b.Z)();return(0,a.jsx)(w,{...e,children:p(e.children)},String(n))}const T={tabItem:"tabItem_mMXE"};function P(e){let{children:n,hidden:t,className:i}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.Z)(T.tabItem,i),hidden:t,children:n})}const A={},E="API",k={id:"guides/using/api/index",title:"API",description:"FlowGen provides a set of APIs to manage your chatbots and conversations. By using these APIs, you can integrate FlowGen service into your own applications.",source:"@site/docs/guides/using/api/index.md",sourceDirName:"guides/using/api",slug:"/guides/using/api/",permalink:"/guides/using/api/",draft:!1,unlisted:!1,editUrl:"https://github.com/tiwater/flowgen/edit/main/website/docs/guides/using/api/index.md",tags:[],version:"current",lastUpdatedAt:1704700878,formattedLastUpdatedAt:"Jan 8, 2024",frontMatter:{},sidebar:"guideSidebar",previous:{title:"Build with FlowGen",permalink:"/guides/build/"},next:{title:"Embed",permalink:"/guides/using/embed/"}},S={},C=[{value:"API Suite",id:"api-suite",level:2},{value:"Authentication Protocols",id:"authentication-protocols",level:2},{value:"Managing API Keys",id:"managing-api-keys",level:2},{value:"Implementation Example: Crafting a Chatbot",id:"implementation-example-crafting-a-chatbot",level:2},{value:"Step 1: Chatbot Creation",id:"step-1-chatbot-creation",level:3},{value:"Step 2: Communication Initiation",id:"step-2-communication-initiation",level:3},{value:"Step 3: Monitoring Chatbot Status",id:"step-3-monitoring-chatbot-status",level:3},{value:"Step 4: Retrieving Messages",id:"step-4-retrieving-messages",level:3},{value:"Step 5: Interjecting in Awaiting Conversations",id:"step-5-interjecting-in-awaiting-conversations",level:3},{value:"Step 6: Concluding the Dialogue",id:"step-6-concluding-the-dialogue",level:3},{value:"Final Thoughts",id:"final-thoughts",level:2}];function _(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"api",children:"API"}),"\n",(0,a.jsx)(n.p,{children:"FlowGen provides a set of APIs to manage your chatbots and conversations. By using these APIs, you can integrate FlowGen service into your own applications."}),"\n",(0,a.jsx)(n.p,{children:"Here we introduce how to use FlowGen service via API."}),"\n",(0,a.jsx)(n.h2,{id:"api-suite",children:"API Suite"}),"\n",(0,a.jsx)(n.p,{children:"Access the suite of FlowGen APIs as follows:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET /chats"}),": Retrieve a list of current chat sessions."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET /chats/{chat_id}"}),": Fetch the status of a specific chat session."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"POST /chats"}),": Initiate a new chat session."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"DELETE /chats/{chat_id}"}),": Remove a specified chat session."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"POST /chats/{chat_id}/messages"}),": Commence communication by transmitting a message to a chat session."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"GET /chats/{chat_id}/messages"}),": Retrieve the message history from a chat session."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"POST /chats/{chat_id}/input"}),": Convey a message to a chat session awaiting human input."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["These APIs are available through the ",(0,a.jsx)(n.code,{children:"<flowgen-api-domain>/"})," endpoint. For instance, if utilizing FlowGen's online services, your endpoint would be ",(0,a.jsx)(n.code,{children:"https://api.flowgen.app/"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["Refer to the ",(0,a.jsx)(n.a,{href:"/api-docs",children:"API Reference"})," for detailed specifications."]}),"\n",(0,a.jsxs)(n.admonition,{type:"warning",children:[(0,a.jsx)(n.p,{children:"The API endpoints outlined in this document are currently in a provisional state and may undergo changes."}),(0,a.jsxs)(n.p,{children:["We welcome any feedback or issues you encounter via our ",(0,a.jsx)(n.a,{href:"https://github.com/tiwater/flowgen/issues",children:(0,a.jsx)(n.strong,{children:"GitHub Issue Tracker"})}),". Your contributions help us improve.."]})]}),"\n",(0,a.jsx)(n.h2,{id:"authentication-protocols",children:"Authentication Protocols"}),"\n",(0,a.jsx)(n.p,{children:"FlowGen's APIs support authentication via OAuth2 Bearer Tokens and API Keys. For third-party application integrations, the provision of an API Key in the request header (X-API-KEY) is the recommended authentication method."}),"\n",(0,a.jsx)(n.p,{children:"Below are examples of how to apply the API Key within various platforms:"}),"\n","\n","\n",(0,a.jsxs)(I,{children:[(0,a.jsx)(P,{value:"bash",label:"Bash",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"curl --request GET \\\n    --url 'https://api.flowgen.app/chats' \\\n    --header 'X-API-KEY: <api-key>'\n"})})}),(0,a.jsx)(P,{value:"typescript",label:"TypeScript",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const res = await fetch(`${NEXT_PUBLIC_BACKEND_URL}/chats`, {\n  headers: {\n    'Content-Type': 'application/json',\n    'X-API-KEY': `${token}`,\n  },\n});\nconst chat = await res.json();\n"})})}),(0,a.jsx)(P,{value:"python",label:"Python",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-py",children:"response = self.client.get(\n    f'{self.base_url}/chats',\n    headers={\"X-API-KEY\": api_key},\n)\nresponse.raise_for_status()\nget_result = response.json()\n"})})})]}),"\n",(0,a.jsxs)(n.p,{children:["For additional information, please consult the ",(0,a.jsx)(n.a,{href:"https://api.flowgen.app/api-docs",children:"API Reference"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"managing-api-keys",children:"Managing API Keys"}),"\n",(0,a.jsxs)(n.p,{children:["To authenticate API requests, API Keys are mandatory. Create and oversee your API Keys through the ",(0,a.jsx)(n.a,{href:"https://platform.flowgen.app/admin/api-keys",children:"FlowGen Platform"}),"."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://platform.flowgen.app/admin/api-keys",children:(0,a.jsx)(n.img,{alt:"API Keys",src:t(7717).Z+"",width:"2518",height:"1860"})})}),"\n",(0,a.jsx)(n.p,{children:"API Keys can be uniquely generated for distinct operational environments, such as separate keys for development and production. They can be invalidated at any moment through deletion on the management interface."}),"\n",(0,a.jsx)(n.h2,{id:"implementation-example-crafting-a-chatbot",children:"Implementation Example: Crafting a Chatbot"}),"\n",(0,a.jsx)(n.p,{children:"Leverage the diverse capabilities of FlowGen's API suite to create a functional chatbot:"}),"\n",(0,a.jsx)(n.h3,{id:"step-1-chatbot-creation",children:"Step 1: Chatbot Creation"}),"\n",(0,a.jsxs)(n.p,{children:["First, create a chatbot by calling ",(0,a.jsx)(n.code,{children:"POST /chats"})," API."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl --request POST \\\n     --url \'https://api.flowgen.app/chats\' \\\n     --header \'X-API-KEY: <api-key>\'\n     --header \'Content-Type: application/json\' \\\n     --data-raw \'{ \\\n         "name": "My Chatbot", \\\n         "from_type": "flow", \\\n         "from_flow": "flow_id", \\\n     }\'\n'})}),"\n",(0,a.jsx)(n.h3,{id:"step-2-communication-initiation",children:"Step 2: Communication Initiation"}),"\n",(0,a.jsxs)(n.p,{children:["Transmit a message to your chatbot utilizing the ",(0,a.jsx)(n.code,{children:"POST /v1/chats/{chat_id}/messages"})," API:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"curl --request POST \\\n     --url 'https://api.flowgen.app/chats/{chat_id}/messages' \\\n     --header 'X-API-KEY: <api-key>' \\\n     --header 'Content-Type: application/json' \\\n      --data-raw '{\n          \"message\": \"Hello, FlowGen!\"\n      }'\n"})}),"\n",(0,a.jsx)(n.h3,{id:"step-3-monitoring-chatbot-status",children:"Step 3: Monitoring Chatbot Status"}),"\n",(0,a.jsx)(n.p,{children:"Given the potential delays introduced by multi-agent collaboration, verify your chatbot's state with a GET request using /chats/{chat_id}:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"curl --request GET \\\n     --url 'https://api.flowgen.app/chats/{chat_id}' \\\n     --header 'X-API-KEY: <api-key>'\n"})}),"\n",(0,a.jsx)(n.p,{children:"The status might exhibit one of the following values:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"ready"}),": The chatbot is ready to run"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"running"}),": The chatbot is running"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"wait_for_human_input"}),": The chatbot is waiting for human input"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"completed"}),": The chatbot has finished. It has not big difference with ",(0,a.jsx)(n.code,{children:"ready"})," status. You can still send message to the chatbot to start a new conversation."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"error"}),": The chatbot has encountered an error"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"step-4-retrieving-messages",children:"Step 4: Retrieving Messages"}),"\n",(0,a.jsx)(n.p,{children:"Extract the communication archive via GET /chats/{chat_id}/messages:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"curl --request GET \\\n     --url 'https://api.flowgen.app/chats/{chat_id}/messages' \\\n     --header 'X-API-KEY: <api-key>'\n     --header 'Content-Type: application/json' \\\n"})}),"\n",(0,a.jsxs)(n.admonition,{type:"info",children:[(0,a.jsx)(n.p,{children:"Utilizing WebSocket technology offers a superior approach for message retrieval, effectively eliminating the inefficiencies of busy waiting that accompany traditional HTTP requests."}),(0,a.jsx)(n.p,{children:"We are actively developing this feature to enhance communication capabilities within our service."})]}),"\n",(0,a.jsx)(n.h3,{id:"step-5-interjecting-in-awaiting-conversations",children:"Step 5: Interjecting in Awaiting Conversations"}),"\n",(0,a.jsxs)(n.p,{children:["If the chatbot is waiting for human input, you can send a message to the chatbot by calling ",(0,a.jsx)(n.code,{children:"POST /chats/{chat_id}/input"})," API."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"curl --request POST \\\n     --url 'https://api.flowgen.app/chats/{chat_id}/input' \\\n     --header 'X-API-KEY: <api-key>' \\\n      --header 'Content-Type: application/json' \\\n        --data-raw '{\n            \"message\": \"Hello, FlowGen!\"\n        }'\n"})}),"\n",(0,a.jsx)(n.h3,{id:"step-6-concluding-the-dialogue",children:"Step 6: Concluding the Dialogue"}),"\n",(0,a.jsx)(n.p,{children:"Conclude and remove the chat session through a DELETE on the chats/{chat_id} endpoint:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"curl --request DELETE \\\n     --url 'https://api.flowgen.app/chats/{chat_id}' \\\n     --header 'X-API-KEY: <api-key>'\n"})}),"\n",(0,a.jsx)(n.h2,{id:"final-thoughts",children:"Final Thoughts"}),"\n",(0,a.jsx)(n.p,{children:"This primer has elucidated the methodology to utilize the FlowGen service via API. Harness these interfaces to embed FlowGen functionalities within bespoke applications or to enhance your existing digital services."})]})}function G(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(_,{...e})}):_(e)}},7717:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/api-keys-7dc23f384ad6d230ad1a2dad94aae2d3.png"},7541:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>r});var a=t(959);const i={},s=a.createContext(i);function r(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);