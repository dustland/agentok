"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[411],{9581:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var s=t(1527),i=t(6224);const r={},o="GroupChat and Functions",a={id:"tutorials/search-n-write/index",title:"GroupChat and Functions",description:"In this tutorial, we will learn how to use GroupChat and Functions to build an agent can search online news and write articles for you.",source:"@site/docs/tutorials/search-n-write/index.md",sourceDirName:"tutorials/search-n-write",slug:"/tutorials/search-n-write/",permalink:"/docs/tutorials/search-n-write/",draft:!1,unlisted:!1,editUrl:"https://github.com/tiwater/flowgen/edit/main/website/docs/tutorials/search-n-write/index.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Getting Started",permalink:"/docs/getting-started"},next:{title:"Human-in-the-Loop",permalink:"/docs/tutorials/human-in-loop/"}},c={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Steps",id:"steps",level:2},{value:"Create a new Flow",id:"create-a-new-flow",level:3},{value:"Orchestrate the Flow",id:"orchestrate-the-flow",level:3},{value:"Add Search function",id:"add-search-function",level:3},{value:"Check the configurations",id:"check-the-configurations",level:3},{value:"Everything is ready, Let&#39;s start with message",id:"everything-is-ready-lets-start-with-message",level:3},{value:"Conclusion",id:"conclusion",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"groupchat-and-functions",children:"GroupChat and Functions"}),"\n",(0,s.jsx)(n.p,{children:"In this tutorial, we will learn how to use GroupChat and Functions to build an agent can search online news and write articles for you."}),"\n",(0,s.jsxs)(n.p,{children:["This tutorial is available as a FlowGen template ",(0,s.jsx)(n.a,{href:"https://flowgen.app/gallery/udaciyj0xp325ye",children:"Search and Write"}),". You can chat with it directly, or fork it to modify the flow."]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.p,{children:["FlowGen. You can experiment with FlowGen ",(0,s.jsx)(n.a,{href:"https://flowgen.app",children:"online"})," or ",(0,s.jsx)(n.a,{href:"https://docs.flowgen.app/docs/getting-started",children:"run it on your local machine"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Our tutorial will use the online version of FlowGen."}),"\n",(0,s.jsx)(n.h2,{id:"steps",children:"Steps"}),"\n",(0,s.jsx)(n.h3,{id:"create-a-new-flow",children:"Create a new Flow"}),"\n",(0,s.jsx)(n.p,{children:"Log in to FlowGen and click Build from Scratch to create a new Flow."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Build from Scratch",src:t(5930).Z+"",width:"2784",height:"1202"})}),"\n",(0,s.jsx)(n.h3,{id:"orchestrate-the-flow",children:"Orchestrate the Flow"}),"\n",(0,s.jsx)(n.p,{children:"Delete the existing sample nodes, then drag and drop the following nodes from the left panel to the canvas."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Assistant Agent"}),", name it ",(0,s.jsx)(n.code,{children:"Searcher"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Assistant Agent"}),", name it ",(0,s.jsx)(n.code,{children:"Writer"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"UserProxy Agent"}),", name it ",(0,s.jsx)(n.code,{children:"UserProxy"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GroupChat"}),", make sure the ",(0,s.jsx)(n.code,{children:"Involve User"})," option is checked"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Alt text",src:t(8641).Z+"",width:"2600",height:"1334"})}),"\n",(0,s.jsx)(n.h3,{id:"add-search-function",children:"Add Search function"}),"\n",(0,s.jsx)(n.p,{children:"Please follow these steps to add a search function:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Click the ",(0,s.jsx)(n.code,{children:"Build Functions"})," button on Config node to open the Function Editor."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Click the Add Function button to add a new function."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Set the function name to ",(0,s.jsx)(n.code,{children:"search_bing_news"}),", and set the description as ",(0,s.jsx)(n.code,{children:"Search Bing for the question and return a list of found links."}),", add a parameter ",(0,s.jsx)(n.code,{children:"keyword"}),", with description as ",(0,s.jsx)(n.code,{children:"The search keyword for Bing"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Click the ",(0,s.jsx)(n.code,{children:"Generate Code"})," button to generate the code for the function."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Check the generated code, and fix issues. AI can do the magic, but with some flaws. In this case, the generated code is not correct, we need to fix it."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The function UI should look like this:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Alt text",src:t(1805).Z+"",width:"2308",height:"1272"})}),"\n",(0,s.jsx)(n.p,{children:"The generated code should look like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import requests\nfrom bs4 import BeautifulSoup\n\n# Construct the search URL\nsearch_url = f\"\"\"https://www.bing.com/news/search?q={keyword.replace(' ', '+')}&form=QBN&pq={keyword.replace(' ', '+')}&sc=8-0&sp=-1&qs=n&sk=\"\"\"\n\n# Perform the HTTP request to Bing\nresponse = requests.get(search_url)\n\n# Check if the request was successful\nif response.status_code == 200:\n    # Parse the HTML content\n    soup = BeautifulSoup(response.text, 'html.parser')\n    # Find all news articles\n    articles = soup.find_all('div', {'class': 'news-card newsitem cardcommon'})\n    # Extract the links from the news articles\n    links = [article.find('a', href=True)['href'] for article in articles]\n    return links\nelse:\n    return []\n"})}),"\n",(0,s.jsx)(n.h3,{id:"check-the-configurations",children:"Check the configurations"}),"\n",(0,s.jsxs)(n.p,{children:["Click the ",(0,s.jsx)(n.code,{children:"More Options"})," button on the UserProxy node and make sure the ",(0,s.jsx)(n.code,{children:"Code Execution"})," is enabled."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Alt text",src:t(2515).Z+"",width:"1326",height:"686"})}),"\n",(0,s.jsxs)(n.p,{children:["In the same option dialog, you can click the small robot head icon to fill in ",(0,s.jsx)(n.code,{children:"TERMINATE"})," as the termination check flag of messages."]}),"\n",(0,s.jsx)(n.p,{children:"All the changes will be saved automatically."}),"\n",(0,s.jsx)(n.h3,{id:"everything-is-ready-lets-start-with-message",children:"Everything is ready, Let's start with message"}),"\n",(0,s.jsxs)(n.p,{children:["Now, we can start to chat with the Flow. Click the ",(0,s.jsx)(n.code,{children:"Start Chat"})," button on the top right corner of the canvas, and you will see a chat window. Enter ",(0,s.jsx)(n.code,{children:"search the lastest news about Elon Musk, and generate an article on it, a very detailed article."})," in the input box and press Enter to start the chat."]}),"\n",(0,s.jsx)(n.p,{children:"The Searcher will search the news about Elon Musk and return a list of links. Then the Writer will extract the information from these links and then write a detailed article based on these retrieved news."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Embed Chat",src:t(4146).Z+"",width:"1270",height:"1352"})}),"\n",(0,s.jsxs)(n.p,{children:["The area is not enough to show the whole chat, so we can click the ",(0,s.jsx)(n.code,{children:"Open this chat in new window"})," to open the chat in a new tab."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Standalone Chat",src:t(5102).Z+"",width:"2794",height:"1484"})}),"\n",(0,s.jsx)(n.p,{children:"Congratulations! You have successfully created a writing agent that can search and write articles for you."}),"\n",(0,s.jsx)(n.h3,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsx)(n.p,{children:"In this tutorial, we have learned how to use GroupChat and Functions to build a flow with code execution and collaboration between multiple agents. We also learned how to use the Function Editor to create a new function and use it in the Flow."})]})}function d(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},5930:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/build-from-scratch-ad00d5b23fd87a32db51b3cf3fcbdd1d.png"},5102:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/chat-7f11e740102748b58859e718a031efb5.png"},2515:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/code-execution-ab10d43c765b8b9899cc9b94fcab6312.png"},4146:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/embed-chat-5db0df382fb3079b1c02a7b26b1bf9fa.png"},8641:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/flow-ce76f50b28729fee7530473e4a265d4a.png"},1805:(e,n,t)=>{t.d(n,{Z:()=>s});const s=t.p+"assets/images/function-editor-6a9fd5f98ce52f55019f08c4e3c17382.png"},6224:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>o});var s=t(959);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);